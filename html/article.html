<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= it.article.title %></title>
	<link rel="stylesheet" href="/style/article.css">
	<link rel="stylesheet" href="/style/site.css">
</head>
<body>
	<div class="container">
		<div class="nav">
			<div class="nav-links">
				<a href="/">Home</a>
				<a href="/create-article">Create a New Article</a>
			</div>
			<a href="/login" class="login-link">Login</a>
		</div>

		<div class="article">
			<div class="article-left">
				<% if (it.article.images && it.article.images.length > 0) { %>
					<div class="image-gallery">
						<button class="prev-btn">&lt;</button>
						<div class="image-container">
							<% it.article.images.forEach((image, index) => { %>
								<img src="<%= image %>" alt="Article Image" class="gallery-image <%= index === 0 ? 'active' : '' %>">
							<% }) %>
						</div>
						<button class="next-btn">&gt;</button>
					</div>
				<% } %>
			</div>

			<div class="article-right">
				<h1><%= it.article.title %></h1>
				<p><%= it.article.content %></p>
			</div>
		</div>
		
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const images = document.querySelectorAll(".gallery-image");
				let currentIndex = 0;

				function showImage(index) {
					images.forEach((img, i) => {
						img.classList.toggle("active", i === index);
					});
				}

				document.querySelector(".prev-btn")?.addEventListener("click", function () {
					currentIndex = (currentIndex - 1 + images.length) % images.length;
					showImage(currentIndex);
				});

				document.querySelector(".next-btn")?.addEventListener("click", function () {
					currentIndex = (currentIndex + 1) % images.length;
					showImage(currentIndex);
				});

				showImage(currentIndex);
			});
		</script>

	</div>
</body>
</html>