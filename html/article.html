<div class="article-left">
  <% if (it.article.images && it.article.images.length > 0) { %>
    <div class="image-gallery">
      <button class="prev-btn">&lt;</button>
      <div class="image-container">
        <% it.article.images.forEach((image, index) => { %>
          <img src="<%= image %>" alt="Article Image" class="gallery-image <%= index === 0 ? 'active' : '' %>" onclick="openFullscreen(this)">
        <% }) %>
      </div>
      <button class="next-btn">&gt;</button>
    </div>
  <% } %>
</div>

<!-- Fullscreen image overlay -->
<div id="fullscreen-overlay" class="fullscreen-overlay">
  <button class="close-btn" onclick="closeFullscreen()">X</button>
  <img id="fullscreen-img" src="" alt="Fullscreen Image">
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const images = document.querySelectorAll(".gallery-image");
    let currentIndex = 0;

    function showImage(index) {
      images.forEach((img, i) => {
        img.classList.toggle("active", i === index);
      });
    }

    document.querySelector(".prev-btn")?.addEventListener("click", function () {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      showImage(currentIndex);
    });

    document.querySelector(".next-btn")?.addEventListener("click", function () {
      currentIndex = (currentIndex + 1) % images.length;
      showImage(currentIndex);
    });

    showImage(currentIndex);
  });

  function openFullscreen(img) {
    const overlay = document.getElementById("fullscreen-overlay");
    const fullscreenImg = document.getElementById("fullscreen-img");

    fullscreenImg.src = img.src;
    overlay.style.display = "flex";
  }

  function closeFullscreen() {
    document.getElementById("fullscreen-overlay").style.display = "none";
  }
</script>